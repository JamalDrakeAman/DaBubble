<section class="flex flex-col w-full h-full bg-white rounded-[30px] pb-4">
    <app-chat-header [chatType]="'thread'" class="mb-[10px]"></app-chat-header>
    
    <div class="flex flex-col flex-1 w-full overflow-y-auto">

        <div class="flex gap-5 mt-[25px] px-4" [ngClass]="{ 'flex-row-reverse': fromCurrentUser('user.id')}">
            <div class="w-max">
                <img class="min-w-[50px] size-[50px] rounded-full" src="{{ userService.getUserById2(threadMessagesService.currentMessage.sender)?.avatar }}" alt="Avatar">
            </div>
            <div class="flex flex-col gap-2">
                <div class="flex items-center gap-5"  [ngClass]="{ 'justify-end': fromCurrentUser('user.id')}">
                    <span class="text-lg font-bold">{{ userService.getUserById2(threadMessagesService.currentMessage.sender)?.name }}</span>
                    <span class="text-sm">{{ messagesService.formatTime(threadMessagesService.currentMessage.timestamp) }}</span>
                </div>
                <div class=" p-[15px] rounded-[30px] w-min" [ngClass]="{ 'bg-purple2 text-white rounded-se-none rounded-ss-[30px]': fromCurrentUser('user.id'), 'bg-primary rounded-ss-none': !fromCurrentUser('user.id') }">
                    <span>{{ threadMessagesService.currentMessage.message }}</span>
                </div>
            </div>
        </div>

        <div class="flex items-center text-[18px] my-[10px] px-4">
            <div class="py-[5px] px-[15px] whitespace-nowrap">
                @if (threadService.currentThread() && threadService.currentThread().content.length > 0) {
                    <p>{{ threadService.currentThread().content.length }} Antworten</p>
                }
            </div>
            <div class="w-full h-[1px] bg-lightpurple"></div>
        </div>
        
        <app-chat-messages [messages]="threadService.currentThread().content" [chatType]="'thread'"></app-chat-messages>
    
    </div>
    <app-chat-input [chatType]="'thread'"></app-chat-input>
</section>